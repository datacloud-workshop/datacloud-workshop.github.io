<!DOCTYPE html>
<html>
<head>
<title>Salesforce Data Cloud Workshop</title>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Raleway">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<style>
body,h1,h2,h3,h4,h5,h6 {font-family: "Raleway", sans-serif}
  /* Accordion CSS for white dropdown  begin */

.accordion {
  background: #336699;
  border: 1px solid #F1F0FF;
  border-radius: 5px;
  font-weight: 700;
  margin: 10px;
  margin-bottom: 15px;
  padding: 10px 20px;
  cursor: pointer;
  font-size: 130%;
  color: white;
}

.accordionDrop {
  padding: 0px 30px;
}

::-webkit-details-marker { 
  display: none;
}
/* Accordion CSS for white dropdown  end*/
</style>
</head>
<body class="w3-content" style="max-width:1600px;">

<!-- Sidebar/menu -->
<nav class="w3-sidebar w3-collapse w3-white w3-animate-left" style="z-index:3;width:300px;" id="mySidebar"><br>
  <div class="w3-container" >    
      <a href="#" onclick="w3_close()" class="w3-hide-large w3-right w3-jumbo w3-padding w3-hover-grey" title="close menu">
      <i class="fa fa-remove"></i>
    </a>
  <h4>Customer Experience Transformation with Salesforce Data Cloud </h4>
    <p> Hands-on Workshop  and Ideation </p>
  </div>
  <div class="w3-bar-block">
    <a href="http://datacloud-workshop.github.io/index.html" onclick="w3_close()" class="w3-bar-item w3-button w3-padding"><i class="fa fa-th-large fa-fw w3-margin-right"></i>Get Started </a> 
    <a href="http://datacloud-workshop.github.io/insidedatacloud.html" onclick="w3_close()" class="w3-bar-item w3-button w3-padding"><i class="fa fa-user fa-fw w3-margin-right"></i>Inside Data Cloud </a>     
    <a href="http://datacloud-workshop.github.io/hands-on.html" onclick="w3_close()" class="w3-bar-item w3-button w3-padding w3-text-black w3-light-grey"><i class="fa fa-user fa-fw w3-margin-right"></i>Hands-on Lab</a> 
    <a href="http://datacloud-workshop.github.io/ideation.html" onclick="w3_close()" class="w3-bar-item w3-button w3-padding"><i class="fa fa-envelope fa-fw w3-margin-right"></i>Ideation </a>
    <a href="http://datacloud-workshop.github.io/resources.html" onclick="w3_close()" class="w3-bar-item w3-button w3-padding"><i class="fa fa-envelope fa-fw w3-margin-right"></i>Resources </a>
  </div>
</nav>

<!-- Overlay effect when opening sidebar on small screens -->
<div class="w3-overlay w3-hide-large w3-animate-opacity" onclick="w3_close()" style="cursor:pointer" title="close side menu" id="myOverlay"></div>

<!-- !PAGE CONTENT! -->
<div class="w3-main" style="margin-left:300px; border-left: 1px solid #000000;">
  <!-- Header -->
  <header >
    <span class="w3-button w3-hide-large w3-xxlarge w3-hover-text-grey" onclick="w3_open()"><i class="fa fa-bars"></i></span>
    <div class="w3-container">
    <h1><b>Salesforce Data Cloud: Hands-on </b></h1>
    <p> Time required: 45 minutes </p>  
     <p> Workshop Goal: The Hands-Lab is designed to provide a first-hand experience of the tools and configuration tasks in the Salesforce Data Cloud platform.</p> 
    </div>
  </header>
<!-- End Header -->
  <div class="w3-container" style= "margin-top:30px; margin-bottom:30px;"> 
<h2>Workshop Use Case </h2>
    <p>  Business Requirement Summary </p>
    <p> How to have a 360 view of my company's customers, when information them is spread in data repositories and Salesforce Orgs?
    For example, if a lead referral is created in  one system about a customer who also resides in another system then 
    I should be  able to centrally orchestrate such processes across multiple systems for a unified view of my business.</i>
    </p>
     <p> The following note describes the detailed use case scenario & solution based on the above requirement.</p>
    <p> A company has customers in two different systems (two different Orgs in our example). The customers 
      in different system  have different profile values (e.g., different first names, phone numbers) and each system has it's own 
      set of leads, accounts, contacts. </p>
      
      <p>In this lab, we ingest  data from the two systems (i.e., the two orgs), harmonize the profiles by mapping them to one 
        common data  model in Data Cloud. We then resolve their  different identities to one unified profile.  </p>
    <p> We now create  Calculated Insights (i.e., analytics) on these customers and also segment them (i.e., create group) into 
    a set of customers whom we want to reach out to.</p>
    <p>Data Cloud has native connection to Marketing Cloud and many other systems so these segments that we create can 
      become easily available in many  activation targets (i.e., the marketing and ad systems and also other external systems like Amazon and Google)
      for use in marketing communications. In our example, we store segmented data into Data Cloud itself which can then be used to trigger 
      Platform Events or be retrieved through API calls for use externally by any app.
    </p>
<div class="w3-card w3-container w3-center w3-mobile" > <img class="w3-image" src=/img/01-use-case-workshop.jpg> </div>
</div>

<div class="w3-container" style= "margin-top:30px; margin-bottom:30px;"> 
<h2> How to Complete This Workshop </h2>
  <p> The workshop is self-guided lab using an instance of Salesforce Data Cloud. Your instructor will provide the 
  login for the Data Cloud intance.</p>
</div>

 <!-- Part 1 Begin --> 
<div class="w3-container" style= "margin-top:30px; margin-bottom:30px;"> 
<h2> Module - 1: Setup (Pre-configurations) </h2>
<p style="color:blue;">  <strong> All steps in this section have been completed for you by the instructor. This is only an informational section for participants.  </strong>
</p>
 <p> Data Cloud has been provisioned in this instance of Salesforce and is available as an app in the Org. 
  This Org is now known as the Home Org of Data Cloud. </p>

  <details>
  <summary class="accordion">  "Turn-On" Data Cloud</summary>
  <div class="accordionDrop">
  <p> Turn on Data Cloud by 'Get Started' button in Data Cloud Setup.
  </p>
  <p> This step installs the Standard Data Model Managed Package, creates the default data space and completes other configurations to get your Data Cloud instance ready for us.
  </p>
   <div class="w3-card w3-container w3-center w3-mobile" > <img class="w3-image" src=/img/dc01-setup.jpg> </div>
  </div>
</details>
  
  <details>
  <summary class="accordion">  Data Cloud Permissions  </summary>
  <div class="accordionDrop">
  <p>Permission Sets give you granular control such as which users in your org can do what activity in your Data Cloud instance.  
  </p>
<p>When Data Cloud is provisioned in your Org, several out of the box (standard) permission sets become available. <p> 
<p>  Add users to permisson sets. For example assign the Data Cloud Admin permission set to 
  the sysadmin who will manage the Data Cloud instance. </p>
   <div class="w3-card w3-container w3-center w3-mobile" > <img class="w3-image" src=/img/02-dc-permission-sets-workshop.jpg> </div>
  </div>
</details>
<p> With the  correct permission sets  assigned, a user can view the Data Cloud app in the App  Launcher. </p> 
   <details>
  <summary class="accordion">  Data Cloud App  </summary>
  <div class="accordionDrop">
   <div class="w3-card w3-container w3-center w3-mobile" > <img class="w3-image" src=/img/03-dc-applauncher-workshop.jpg> </div>
  </div>
</details>

<p> The workshop participants have been assigned the 'Data Cloud User' permission set which allows you to examine the Data Cloud configurations.
</p> 
   <details>
  <summary class="accordion">  Data Cloud App - Menu Tabs </summary>
     <p> Here's a quick look at the various Data Cloud tools available as tabs in the Data Cloud app.</p>
  <div class="accordionDrop">
   <div class="w3-card w3-container w3-center w3-mobile" > <img class="w3-image" src=/img/04-dc-tabs-workshop.jpg> </div>
  </div>
</details>
  
<p> The Data Cloud Setup button takes you to the pre-configuration page.
</p>
   <details>
  <summary class="accordion">  Data Cloud App - Setup </summary>
  <div class="accordionDrop">
   <div class="w3-card w3-container w3-center w3-mobile" > <img class="w3-image" src=/img/05-dc-setup-workshop.jpg> </div>
  </div>
</details>

Following are the steps for configuring the CRM Connector which will then allow us to create Data Streams for ingesting data.
   <details>
  <summary class="accordion">  Connector Configuration </summary>
  <div class="accordionDrop">
      <p> We click on the CRM Connector and then Connect.  The CRM Connector provides a pre-built connection from Salesforce Orgs to 
    Data Cloud. You can set up ingestion of records (i.e., create Data Streams) from either standard or custom objects. The ingestion schedule is hourly refresh.
</p>

   <p> Note that even though Data Cloud is provisioned in the Home Org, we still need to explictly establish a connection 
   to the Org which is the Home Org.
 </p>
    <p> Please also note that in the org(s) that you want to connect to Data Cloud, you need to assign appropriate 
    permissions to the <a target="_blank" href="https://help.salesforce.com/s/articleView?id=sf.c360_a_enable_user_permissions_external_salesforce_org.htm&type=5"> Data Cloud Salesforce Connector permission set. </a> </p>
   <div class="w3-card w3-container w3-center w3-mobile" > <img class="w3-image" src=/img/06-dc-crm-connector-workshop.jpg> </div>
<p> &nbsp;</p>
       <div class="w3-card w3-container w3-center w3-mobile" > <img class="w3-image" src=/img/06-dc-crm-connector-workshop-2.jpg> </div>
  </div>
</details>

   <p> Install the Data Bundle for the CRM Connector. 
 </p>
   <details>
  <summary class="accordion">  Install Data Bundle </summary>
  <div class="accordionDrop">
    <p> The Data Bundle consists of pre-defined mappings for  certain Salesforce objects (Account, Contact, Leads for Sales Bundle and Account, Contact, Cases for Service Bundle).</p>
   <div class="w3-card w3-container w3-center w3-mobile" > <img class="w3-image" src=/img/07-install-bundle.jpg> </div>
  </div>
</details>
  
</div>
 <!-- Part 1 End --> 
  
  <!-- Part 2 Begin --> 
  <div class="w3-container" style= "margin-top:30px; margin-bottom:30px;"> 
<h2> Module - 2: Explore </h2>
 <p> Let's explore and make ourselves familiar with Data Cloud app.  </p>   
  <details>
  <summary class="accordion">  Ingestion: Create Data Stream </summary>
  <div class="accordionDrop">
<p style="color:blue;">  <strong> This step has been completed for you by the instructor. This is only an informational section for participants.  </strong>
</p>
    <p> We create Data Streams to ingest the data from the Orgs that we connected in the previous steps.
    To create Data Streams we use the Sales Data Bundle for the CRM Connector that we had installed in the previous steps. The Sales
      Data Bundle is a pre-built template that ingests three objects (Account, Contact and Leads) from the connected Salesforce
      Org and includes mappings for these objects to the canonical data model in Data Cloud. 
    </p>
    <p> The workshop participants do not have access to create Data Stream permission.</p>
     <p> However we have included the screenshots of all the screens that we went through to create the Data Streams.</p>

    <div class="w3-card w3-container w3-center w3-mobile" > <img class="w3-image" src=/img/datastream-01.jpg> </div>
<p> &nbsp;</p>
    <div class="w3-card w3-container w3-center w3-mobile" > <img class="w3-image" src=/img/datastream-02.jpg> </div>
<p> &nbsp;</p>
        <div class="w3-card w3-container w3-center w3-mobile" > <img class="w3-image" src=/img/datastream-03.jpg> </div>
<p> &nbsp;</p>
      <p> You can also create Formula Fields while creating Data Streams. This feature lets you apply calculations and simple transformation
    quickly.  In addition to formula fields Data Cloud provides  separate batch and streaming transform tools 
    for more complex transformations.</p>
            <div class="w3-card w3-container w3-center w3-mobile" > <img class="w3-image" src=/img/formulafields.jpg> </div>

    <p> &nbsp;</p>
        <div class="w3-card w3-container w3-center w3-mobile" > <img class="w3-image" src=/img/datastream-04.jpg> </div>

    <p> In the above example we created a Data Stream using a pre-built connector. Data Cloud also supports both batch and streaming ingestion directly through APIs or with MuleSoft connectors. 
    We have included an example of using Data Cloud Ingestion API  at a later point in this guide.
    </p>      
  </div>
</details>  
    <p> In our next step, harmonization refers to the process of  modeling different data sources into one
      standardized data model available in Data Cloud. The standard Cloud data  model
    can be extended by adding custom objects and custom fields.</p>
    <details>    
  <summary class="accordion">  Harmonization: Data Stream Mappings </summary>
  <div class="accordionDrop">
        <p>Why do we need to harmonize data? In your different sources your customer may be known by different labels/names.
      E.g., In an email marketing app the customer may be known as a 'subscriber' while in the CRM app
      the same customer may be known as a 'contact.' In the harmonization step they will both get mapped 
  to the Individual object in Data Cloud's canonical data model.
    </p>
    <p>  The first step in harmonization is mapping. When you create a 
    'Data Stream' the source data lands in a set of objects called Data Lake Objects (DLO). These DLOs are now
    mapped to the standard data model in Data Cloud which consist of a set of objects called Data Model Objects (DMO). </p>
    <p> Let's click on one of the Data Streams and then click on Review Mappings on the right sidebar.</p>
    <p> <div class="w3-card w3-container w3-center w3-mobile" > <img class="w3-image" src=/img/datastream-05.jpg> </div> </p>
<p> <div class="w3-card w3-container w3-center w3-mobile" > <img class="w3-image" src=/img/datastream-06.jpg> </div> </p> 
<p> The harmonization process that we see above maps multiple source objects to a set of consistent objects and fields in the canonical data model.
</p>
    <p> Data Cloud provides AI based  <a target="_blank" href="https://help.salesforce.com/s/articleView?id=release-notes.cdp_rn_2023_summer_auto_mapping.htm&release=244&type=5"> auto-mapping suggestions </a> during the Harmonization step. </p>
    <p>This harmonized data can then be matched and resolved to unique identities in the next step of 
    Identity Resolution.</p>
  </div>    
    </details> 
      
 <details>    
  <summary class="accordion"> Data Model: Review Data Cloud Objects </summary>
  <div class="accordionDrop">
    <p> In the Data Cloud app click on Data Lake Objects  tab. Then click dropdown and select All Data Lake Objects.</p>
    <p> The incoming data to Data Cloud  from a Data Stream lands in a Data Lake Object (DLO). The fields
    in the DLO (e.g., field name, field type, field length) mirror the fields in your source table.</p>
 <div class="w3-card w3-container w3-center w3-mobile" > <img class="w3-image" src=/img/dlo.jpg> </div>
    <p> After we have created the mappings for the Data Stream, the data from the Data Lake Object is 
    replicated to the Data Model Object (DMO) in Data Cloud. </p>
       <p> Data Cloud provides a set of pre-built/standard  DMOs which constitute the canoncal data model in Data Cloud.
    You can extend this canonical data model by creating custom DMOs or by adding fields to standard DMOs.   
       </p>
      <p> In the Data Cloud app click on Data Model Objects tab. Click on any Data Model Object (DMO) to review its properties.
      For example an account DMO shows it belongs to the type Profile.  You can also have DMO of type Engagement that would 
        store data coming in from websites (e.g., clicks, email opens). The third type of DMO could be of type Other
        which could be data such as product information (e.g., store address, models of the product).
      </p>
  <div class="w3-card w3-container w3-center w3-mobile" > <img class="w3-image" src=/img/dmo.jpg> </div>
  </div>  
  </details> 

    <details>    
<summary class="accordion">  Data Explorer </summary> 
<div class="accordionDrop">
  <p> Click on Data Explorer in the Data Cloud app. Put in the options 
    as you see in the following screenshot </p>   
<p> <div class="w3-card w3-container w3-center w3-mobile" > <img class="w3-image" src=/img/dataexplorer.jpg> </div> </p>
  <p> The Individual DMO (data model object) contains all the individual profiles aggregated from the incoming data source objects e.g., contacts, subscriber etc. </p> 
  <p>In the next step of Identity Resolution, we shall use match rules to merge individual profiles that belong to the same person in Unified
  Individual data model object. </p>
</div>    
 </details> 

           <p> In the following step, with Data Cloud’s Identity Resolution, we build a 360-degree view of our customers by combining data from multiple data sources into a single Unified Profile. </p>
            <p>  Identity Resolution uses a combination of matching 
         and reconciliation.  Match Rules are used to link together multiple records into a unified customer profile. Reconciliation rules determine which  profile attributes of Individuals will become part of the Unified Profile.   </p>
     <details>    
  <summary class="accordion"> Identity Resolution: Match Rules </summary>
 <p style="color:blue;">  <strong> This step has been completed for you by the instructor. This is only an informational section for participants.  </strong>
</p>    
  <div class="accordionDrop">

    <p> Many of the  customers/contacts in the two different systems (e.g., the two Salesforce Orgs) belong to the same individual person.
    However the contacts have different profiles. For example in one Org the person has a contact name Bobby Lombard
    while in another Org, the person has the name Robert Lombard. </p>
    <p> We want to match these different contacts into one unified profile. 
    This will allow us then to aggregate all the leads and other engagement data under this unified profile for a 360 degree view of the customer.
    </p>
    <p> We start by defining match rules. We choose First Name and eMail as the identifiers for our match rule. However you can make the match rule
    as extensive as you wish using and/or constructs. You can also include custom identiers in your match rule such as 
    MDM ID.</p>
<p> In our match ruleset, we  leverage  <a target="_blank" href="https://engineering.salesforce.com/ai-based-identity-resolution-the-key-for-linking-diverse-customer-data/"> AI /LLM based </a> fuzzy first-name matching approach that leverages to match individuals. </p>
    
    <p>We went through the following screens in this step. </p>
 <div class="w3-card w3-container w3-center w3-mobile" > <img class="w3-image" src=/img/identity-01.jpg> </div>
      <p> &nbsp;</p>
  <div class="w3-card w3-container w3-center w3-mobile" > <img class="w3-image" src=/img/identity-02.jpg> </div>
      <p> &nbsp;</p>
    <div class="w3-card w3-container w3-center w3-mobile" > <img class="w3-image" src=/img/identity-03.jpg> </div>
      <p> &nbsp;</p>
    <div class="w3-card w3-container w3-center w3-mobile" > <img class="w3-image" src=/img/identity-04.jpg> </div>
      <p> &nbsp;</p>
    <div class="w3-card w3-container w3-center w3-mobile" > <img class="w3-image" src=/img/identity-05.jpg> </div>
      <p> &nbsp;</p>
    <div class="w3-card w3-container w3-center w3-mobile" > <img class="w3-image" src=/img/identity-06.jpg> </div>
 
  </div>  
  </details>

    <details>    
  <summary class="accordion">  Identity Resolution: Reconciliation </summary>
  <div class="accordionDrop">
    <p> In the Data Cloud app,  click on the tab Identity Resolution - and then click on the "Individual" ruleset name.</p>
<p> In this step you can view the default reconcilation rules that we used. 
  <p>While match rules that we used in the previous steps are used to link together data into a unified customer profile, 
    reconciliation rules determine the logic for data selection. 
    For example, if the contact has two different first names in two Orgs, 
    a reconciliation rule helps to determine which one to actually use in the unified individual profile. </p> 
      <p> Examples of  reconciliation rules are - Last Updated, Most Frequent, Source Priority. </p>
  <p> A Data Cloud admin would have the ability to change these reconciliation rules as desired for each field. </p>   
    <div class="w3-card w3-container w3-center w3-mobile" > <img class="w3-image" src=/img/identity-reconciliation.jpg> </div>
  </div>    
    </details> 

    <details>    
<summary class="accordion">  Profile Explorer </summary> 
      <p>  Profile Explorer lets you examine a unified profile for an account or individual - including objects related to the unified profile, related engagements and insights (i.e., Calculated Insights defined on Unified Profiles).</p>
<div class="accordionDrop">
  <p> Click on Profile Explorer in the Data Cloud app. Put in the options to filter the unified profiles 
    as you see in the following screenshot 
  (i.e., Unified Individual, First Name, Robert). Please note that Profile Explorer is case sensitive (e.g., Robert vs robert)</p>   
<div class="w3-card w3-container w3-center w3-mobile" > <img class="w3-image" src=/img/profile-explorer-1.jpg> </div>
  <p> Click on View. You now see that two different contacts with two different first names have been merged into
  one unified individual profile using the rulesets and reconciliation rules that we had chosen.</p>
  <div class="w3-card w3-container w3-center w3-mobile" > <img class="w3-image" src=/img/profile-explorer-2.jpg> </div>
</div>    
 </details> 
    
  </div>
  <!-- Part 2 End -->

    <!-- Part 3 Begin -->
<div class="w3-container" style= "margin-top:30px; margin-bottom:30px;"> 
<h2> Module - 3: Experiment (OPTIONAL) </h2> 
  <div class="w3-container"> <div class="w3-bar w3-teal"> <p> <center>  Calculated Insights </center> </p> </div> </div>


  <p> In the following section let's explore Calculated Insights.</p>
<details>    
<summary class="accordion">  Calculated Insights </summary>
  <p>   <p> Calculated Insights and Streaming Insights are  analytics tool natively available in the Data Cloud. </p>
  <p> Calculated Insights perform complex calculations on data aggregated in batches, while Streaming Insights 
  work on events happening in near-real time.</p></p>
<p> Calculated Insight lets you define metrics
 data in Data Cloud using either SQL or point and click builder. These metrics 
  can then be used in other parts of Data Cloud e.g., as an attribute while creating marketing segments or 
  as a triggerring event  for Data Actions or for vizualizing data patterns.
</p>  
  <p> Let's create a Calculated Insight.</p>
  <p> We shall create a calculated insight that contains one record per unified individual and 
    includes counts that show how often each person appears as a contact, 
    lead, and account, and how often they appear across multiple orgs, if applicable.
</p>
<div class="accordionDrop">
<div class="w3-card w3-container w3-center w3-mobile" > <img class="w3-image" src=/img/calculatedinsight-1.jpg> </div>
  <p> &nbsp;</p>
<p> You can copy paste the following SQL in the next screen to replace the placeholder code in the SQL Query box.

<blockquote> 
SELECT UnifiedIndividual__dlm.ssot__Id__c AS Customer_Id__c ,approx_count_distinct(iil.Contact_Id__c) AS Contact_Count__c ,approx_count_distinct(iil.Lead_Id__c) AS Lead_Count__c ,approx_count_distinct(iil.ssot__AccountId__c) AS Account_Contact_Count__c ,approx_count_distinct(iil.ssot__DataSourceId__c) AS Salesforce_Org_Count__c FROM UnifiedIndividual__dlm /* The sub-query is required to perform case statements prior to aggregating */ LEFT JOIN ( SELECT IndividualIdentityLink__dlm.UnifiedRecordId__c AS UnifiedRecordId__c ,IndividualIdentityLink__dlm.SourceRecordId__c AS SourceRecordId__c ,IndividualIdentityLink__dlm.ssot__DataSourceId__c AS ssot__DataSourceId__c ,CASE WHEN IndividualIdentityLink__dlm.ssot__DataSourceObjectId__c = 'Contact' THEN IndividualIdentityLink__dlm.SourceRecordId__c ELSE NULL END Contact_Id__c ,CASE WHEN IndividualIdentityLink__dlm.ssot__DataSourceObjectId__c = 'Lead' THEN IndividualIdentityLink__dlm.SourceRecordId__c ELSE NULL END Lead_Id__c ,AccountContact.ssot__AccountId__c AS ssot__AccountId__c FROM IndividualIdentityLink__dlm LEFT JOIN ( SELECT DISTINCT ssot__AccountContact__dlm.ssot__IndividualId__c AS ssot__IndividualId__c ,ssot__AccountContact__dlm.ssot__AccountId__c AS ssot__AccountId__c FROM ssot__AccountContact__dlm ) AccountContact ON IndividualIdentityLink__dlm.SourceRecordId__c = AccountContact.ssot__IndividualId__c WHERE IndividualIdentityLink__dlm.ssot__DataSourceId__c LIKE 'Salesforce_00D%' ) iil /* "Data Source ID like Salesforce_00D%" identifies Salesforce CRM sources. 00D is the prefix for the Org ID object type. * This is optional but it adds greater certainty that this is a Salesforce Org source ID from the connector.*/ ON UnifiedIndividual__dlm.ssot__Id__c = iil.UnifiedRecordId__c GROUP BY Customer_Id__c

</blockquote>

</p>
  
<div class="w3-card w3-container w3-center w3-mobile" > <img class="w3-image" src=/img/calculatedinsight-2.jpg> </div>
    <p> &nbsp;</p>
 <div class="w3-card w3-container w3-center w3-mobile" > <img class="w3-image" src=/img/calculatedinsight-3.jpg> </div>
    <p> &nbsp;</p>
  <p style="color:blue;">  <strong>
    After you have created the Calculated Insight, ping your instructor so he/she can Publish it. 
  A participant user does not have the permissions required to publish a Calculated Insight.</strong>
</p>
 <div class="w3-card w3-container w3-center w3-mobile" > <img class="w3-image" src=/img/calculatedinsight-4.jpg> </div>

  <p> Once your instructor has published your Calculated Insight, you can view the results in Data Explorer. </p>
 <div class="w3-card w3-container w3-center w3-mobile" > <img class="w3-image" src=/img/calculatedinsight-5.jpg> </div>
</div>   
 <p> The above example gives you a quick look at the Calculated Insights tool. In one of the following sectons we shall create another Calculated Insight
 and use it as an attribute to segment customers. </p> 
 </details> 
</div> 
   <!-- Part 3  End -->
  <!-- Part 3a  begins -->
  <div class="w3-container" style= "margin-top:30px; margin-bottom:30px;"> 
<div class="w3-container"> <div class="w3-bar w3-teal"> <p> <center>  Segmentation & Activation </center> </p> </div> </div>
  <p> Let's now create a segment to identify target customers for our new marketing campaign.</p>


    <details>    
<summary class="accordion">  Segment Creation - Step I : Calculated Insight </summary> 
<div class="accordionDrop">
  <p>   First we create a calculated insight to identify customers who have purchased a product from the company, i.e., who
  have a sales order.</p>   
<div class="w3-card w3-container w3-center w3-mobile" > <img class="w3-image" src=/img/segment-ci-1.jpg> </div>
<p> &nbsp;</p>
  <blockquote> 
    <strong> Replace the placeholder code with the following sql.</strong>
    <p>SELECT SUM(ssot__SalesOrder__dlm.ssot__GrandTotalAmount__c) as customer_spend__c, ssot__Individual__dlm.ssot__Id__c as custid__c FROM ssot__SalesOrder__dlm JOIN ssot__Individual__dlm ON ssot__SalesOrder__dlm.ssot__Id__c = ssot__Individual__dlm.salesOrderID__c GROUP BY custid__c
  </p>
    <p> Gotcha: If the above code gives a syntax error check in your environment for an existing Calculated Insight (CI) 
    called 'Customer Spend'. Use the code from that CI as it's possible that in your environment the field names may be slightly different. </p>
  </blockquote>
  <div class="w3-card w3-container w3-center w3-mobile" > <img class="w3-image" src=/img/segment-ci-2.jpg> </div>
<p> &nbsp;</p>
  <div class="w3-card w3-container w3-center w3-mobile" > <img class="w3-image" src=/img/segment-ci-3.jpg> </div>
<p> &nbsp;</p>
  <div class="w3-card w3-container w3-center w3-mobile" > <img class="w3-image" src=/img/segment-ci-4.jpg> </div>
</div>    
 </details>

    <details>    
<summary class="accordion">  Segment Creation - Step II: Use Attributes From Profile and Calculated Insight </summary> 
<div class="accordionDrop">
  <p>  We use attributes from both the Individual DMO and the Calculated Insight we had created to create a marketing segment.  </p>   
<div class="w3-card w3-container w3-center w3-mobile" > <img class="w3-image" src=/img/segment-1.jpg> </div>
<p> &nbsp;</p>
  <div class="w3-card w3-container w3-center w3-mobile" > <img class="w3-image" src=/img/segment-2.jpg> </div>
<p> &nbsp;</p>
  <div class="w3-card w3-container w3-center w3-mobile" > <img class="w3-image" src=/img/segment-3.jpg> </div>
<p> &nbsp;</p>
  <div class="w3-card w3-container w3-center w3-mobile" > <img class="w3-image" src=/img/segment-4.jpg> </div>
 <p> &nbsp;</p>
  <div class="w3-card w3-container w3-center w3-mobile" > <img class="w3-image" src=/img/segment-5.jpg> </div>
  <p> &nbsp;</p>
  <div class="w3-card w3-container w3-center w3-mobile" > <img class="w3-image" src=/img/segment-6.jpg> </div>
<p> &nbsp;</p>
  <div class="w3-card w3-container w3-center w3-mobile" > <img class="w3-image" src=/img/segment-7.jpg> </div>
</div>    
 </details>

   <details>   
  <summary class="accordion">  Segment Creation - Step III: Activation </summary> 
<div class="accordionDrop">
  <p>  We use attributes from both the Individual DMO and our  Calculated Insight to create a marketing segment.  </p>   
<p> &nbsp;</p>
  <div class="w3-card w3-container w3-center w3-mobile" > <img class="w3-image" src=/img/activation-1.jpg> </div>
<p> &nbsp;</p>
  <div class="w3-card w3-container w3-center w3-mobile" > <img class="w3-image" src=/img/activation-2.jpg> </div>
<p> &nbsp;</p>
  <div class="w3-card w3-container w3-center w3-mobile" > <img class="w3-image" src=/img/activation-3.jpg> </div>
 <p> &nbsp;</p>
  <div class="w3-card w3-container w3-center w3-mobile" > <img class="w3-image" src=/img/activation-4.jpg> </div>
<p> &nbsp;</p>
  <div class="w3-card w3-container w3-center w3-mobile" > <img class="w3-image" src=/img/activation-5.jpg> </div>
 <p> &nbsp;</p>
  <div class="w3-card w3-container w3-center w3-mobile" > <img class="w3-image" src=/img/activation-6.jpg> </div>
  <p> After Activation, we would need to publish the Segment again. </p>
<p> &nbsp;</p>
  
  <div class="w3-card w3-container w3-center w3-mobile" > <img class="w3-image" src=/img/activation-7.jpg> </div>
<p> In the above example, we have chosen Data Cloud itself to be an activation target. What this means is that
the  segement data is stored in a custom Data Model Object (DMO) that gets created in Data Cloud. Data from this 
custom DMO can then be extracted via APIs in any desired app for using as a contact list for a marketing campaign. </p>
  <p>In addition, Data Cloud supports out of the box integration with Salesforce Marketing Cloud as an activation target. Other 
  ou of the box integrations for activation targets include SFTP, GCS or Azure Storage and ad platforms  such as
     Google or Meta Advertising Platforms. </p>
</div>    
 </details>
</div>
  <div class="w3-container" style= "margin-top:30px; margin-bottom:30px;"> 
<div class="w3-container"> <div class="w3-bar w3-teal"> <p> <center> Using Ingestion API </center>  </p> </div> </div>
    <p> You can push data from an external system into Data Cloud with Ingestion API. The Ingestion API
      is a REST API and supports both bulk and streaming ingestion.</p>
<details>   
  <summary class="accordion">  Ingestion API Steps </summary> 
<div class="accordionDrop">
    <p> If you would like to try the following section, please request authentication credentials for Data Cloud 
      from your workshop facilitator.</p>
  <p>If you wouldn't like to try this sub-section about Ingestion API yourself, the following
  link may still be of value in undertanding the practical steps in using Ingestion API.</p>
  <p> <a target="_blank" href="https://salesforce.quip.com/N1zfAiQ6WbPZ"> Send Data into Data Cloud via the Ingestion API using Postman </a></p>
 </details>
<p> &nbsp; </p> 
</div>
  <div class="w3-container" style= "margin-top:10px; margin-bottom:30px;"> 
<p> Congratulations! You have now completed the key foundational steps for Data Cloud.  In the next sections we examine
some of the ways of leveraging Data Cloud in your business applications.</p>
  </div>
  <!-- Part 3a  ends -->
  
   <!-- Part 4 Begin -->
  <div class="w3-container" style= "margin-top:30px; margin-bottom:30px;"> 
<h2> Module - 4: Advanced (OPTIONAL)  </h2> 
    <p style="color:blue;"> This is an advanced optional section. If you prefer to skip it, we have included complete set of 
  screenshots of each step that you can review  without actually doing the steps in live environment.
</p>
<div class="w3-container"> <div class="w3-bar w3-teal"> <p> <center> Accessing Data Cloud Data from External Systems </center>  </p> </div> </div>
<p> Data Cloud provides REST APIs to access data and metadata from external systems.</p>
    <details>   
  <summary class="accordion">  Connect (Query) API Steps </summary> 
<div class="accordionDrop">
  <p> <a target="_blank" href="https://www.appcloud101.com/working-with-salesforce-data-cloud-apis/"> Access Data Cloud data externally via APIs </a> </p>
 </details>
<p> &nbsp; </p> 
    
 <div class="w3-container"> <div class="w3-bar w3-teal"> <p> <center> Connect Tableau with Data Cloud </center>  </p> </div> </div>
<p> 
Tableau Cloud provides native connector for Data Cloud, point and click analysis to  discover hidden insights,
  and lets you take action with AI-powered insights in the flow of work.</p>
    <details>   
  <summary class="accordion">  Vizualize Data Cloud Data with Tableau Cloud  </summary> 
<div class="accordionDrop">
  <p>  Let's sign up for a 15 day free Tableau Cloud trial.  </p>   
  <div class="w3-card w3-container w3-center w3-mobile" > <img class="w3-image" src=/img/tableau01.jpg> </div>
<p> &nbsp;</p>
  <div class="w3-card w3-container w3-center w3-mobile" > <img class="w3-image" src=/img/tableau02.jpg> </div>
<p> &nbsp;</p>
  <div class="w3-card w3-container w3-center w3-mobile" > <img class="w3-image" src=/img/tableau03.jpg> </div>
 <p> &nbsp;</p>
  <div class="w3-card w3-container w3-center w3-mobile" > <img class="w3-image" src=/img/tableau04.jpg> </div>
<p> &nbsp;</p>
  <div class="w3-card w3-container w3-center w3-mobile" > <img class="w3-image" src=/img/tableau05.jpg> </div>
 <p> &nbsp;</p>
  <div class="w3-card w3-container w3-center w3-mobile" > <img class="w3-image" src=/img/tableau06.jpg> </div>
<p> &nbsp;</p>
  <div class="w3-card w3-container w3-center w3-mobile" > <img class="w3-image" src=/img/tableau07.jpg> </div>
<p> Now that you have the connection from Tableau Cloud to Salesforce Data Cloud you can start visualizing Data Cloud data.</p>
  <p> The following guide provides the basics of Data Vizualization in Tableau: <a target="_blank" href="https://trailhead.salesforce.com/content/learn/modules/create-edit-and-save-custom-views-in-tableau-online"> Data Vizualization in Tableau Cloud </a></p>
</div>    
 </details>
  </div>
    <!-- Part 4 End -->
    <!-- Part 5 Begin -->
    <div class="w3-container" style= "margin-top:30px; margin-bottom:30px;"> 
       <div class="w3-container"> <div class="w3-bar w3-teal"> <p> <center> Data Actions  </center>  </p> </div> </div>
<p style="color:blue;"> Since only a limited set of Data Action Targets can be defined in a Data Cloud instance
    participants may need to create Data Actions on a common/shared set of Data Action Targets. Alternatively please request the facilitators for access to a separate org if the currently configured Data Action Targets in their Data Cloud instance is not suitable for their needs.</p>
<details>    
<summary class="accordion">  Using Data Actions for Multi-Org Lead Orchestration  </summary> 
<div class="accordionDrop">
  <p> We consider a very common scenario of orchestrating and monitoring business processes for leads across 
  the different systems in an enterprise.</p>
  <p>The following is a rough high level sketch of the steps for passing leads from Org 2 (source) to Org 1 (destination) via Data Cloud. </p>
   <p> &nbsp; </p>
  <p> Summary of data flow:   We create a Data Action on a DMO or CI and get the payload using a Flow in Home Org. The Flow could be triggered by
  the special Platform Event (Data Object Data Change Event) and the content of the payload can be mapped to fields 
  using Apex or the Flow Mapper action pack available from unoffocialSF site. </p>
  <div class="w3-card w3-container w3-center w3-mobile" > <img class="w3-image" src=/img/00dc00.jpg> </div>

  <p> We start by connecting the target org explicitly (even if it is the Home Org)</p>
  <div class="w3-card w3-container w3-center w3-mobile" > <img class="w3-image" src=/img/00dc01.jpg> </div>
 <p> &nbsp; </p>
   <p> We define the Data Action Target </p>
    <div class="w3-card w3-container w3-center w3-mobile" > <img class="w3-image" src=/img/00dc02.jpg> </div>
 <p> &nbsp; </p>
    <div class="w3-card w3-container w3-center w3-mobile" > <img class="w3-image" src=/img/00dc03.jpg> </div>
 <p> &nbsp; </p>
    <div class="w3-card w3-container w3-center w3-mobile" > <img class="w3-image" src=/img/00dc04.jpg> </div>
 <p> &nbsp; </p>
   <p> We define the Data Action.</p>
    <div class="w3-card w3-container w3-center w3-mobile" > <img class="w3-image" src=/img/00dc05.jpg> </div>
 <p> &nbsp; </p>
    <div class="w3-card w3-container w3-center w3-mobile" > <img class="w3-image" src=/img/00dc06.jpg> </div>
 <p> &nbsp; </p>
    <div class="w3-card w3-container w3-center w3-mobile" > <img class="w3-image" src=/img/00dc07.jpg> </div>
 <p> &nbsp; </p>
    <div class="w3-card w3-container w3-center w3-mobile" > <img class="w3-image" src=/img/00dc08.jpg> </div>
 <p> &nbsp; </p>
    <div class="w3-card w3-container w3-center w3-mobile" > <img class="w3-image" src=/img/00dc09.jpg> </div>
 <p> &nbsp; </p>
    <div class="w3-card w3-container w3-center w3-mobile" > <img class="w3-image" src=/img/00dc10.jpg> </div>
 <p> &nbsp; </p>
   <p> We use Streaming Monitor app in the target Org to monitor incoming Platform Events. Data Object Data Change Event is a
     standard Platform Event that is designed to receive changes from Data Actions.</p>
    <div class="w3-card w3-container w3-center w3-mobile" > <img class="w3-image" src=/img/00dc11.jpg> </div>
 <p> &nbsp; </p>
    <div class="w3-card w3-container w3-center w3-mobile" > <img class="w3-image" src=/img/00dc12.jpg> </div>
 <p> &nbsp; </p>
    <div class="w3-card w3-container w3-center w3-mobile" > <img class="w3-image" src=/img/00dc13.jpg> </div>
 <p> &nbsp; </p>
  <p> We trigger the Data Action by creating a lead in a connected source system.</p>
    <div class="w3-card w3-container w3-center w3-mobile" > <img class="w3-image" src=/img/00dc14.jpg> </div>
 <p> &nbsp; </p>
    <div class="w3-card w3-container w3-center w3-mobile" > <img class="w3-image" src=/img/00dc15.jpg> </div>
 <p> &nbsp; </p>
  <p> We refresh the data stream in Data Cloud to ingest the newly created lead in the source system</p>
    <div class="w3-card w3-container w3-center w3-mobile" > <img class="w3-image" src=/img/00dc16.jpg> </div>
 <p> &nbsp; </p>
    <div class="w3-card w3-container w3-center w3-mobile" > <img class="w3-image" src=/img/00dc17.jpg> </div>
 <p> &nbsp; </p>
   <p> We can use the free Streaming Monitor app from AppExchange to  check for incoming Platform Events. </p>
  <p> In the Streaming Monitor app we see the new event notification that also shows the 
  json payload information about the new lead.</p>
    <div class="w3-card w3-container w3-center w3-mobile" > <img class="w3-image" src=/img/00dc18.jpg> </div>
 <p> &nbsp; </p>
    <div class="w3-card w3-container w3-center w3-mobile" > <img class="w3-image" src=/img/00dc19.jpg> </div>
 <p> &nbsp; </p>
  <p style="color:blue;"> Please note that the notifications about Platform Events via Streaming Monitor may be delayed.</p>
  <p>While the above streaming monitor app is a useful tool to monitor incoming Platform Events,
  in real life we may want to capture the event json payload and then parse it and 
  insert it into relevant objects as in the following steps.</p>
  
  <p> In the destination org -  we go to Setup -> Flow,  and create a flow that will get triggered by a standard platform event called Data Object Data Change Event.</p>
  <p>Data Object Data Change Event is the Platform Event that our Data Action will update.</p>
  <p> The following screen shows the flow that we use. In the Flow, we use   <a target="_blank" href="https://help.salesforce.com/s/articleView?id=sf.c360_a_build_a_flow_in_customer_data_platform.htm&type=5">Data Object Data Change Event</a> 
    to retrieve the payload generated by Data Action.</p>
  <div class="w3-card w3-container w3-center w3-mobile" > <img class="w3-image" src=/img/data-action-6.jpg> </div>
 <p> &nbsp; </p>
  <p> The payload from the  Data Object Data Change Event is in the form of a json string. We need to extract the values corresponding to the keys that we need.</p>
  <p> Now in the following screenshot, we use the <a target="_blank" href="https://unofficialsf.com/use-datamapper-to-convert-web-json-to-salesforce-flow-objects/"> Data Mapper </a> tool to convert JSON to Flow Variables, and then insert the value of the 
  variables in a Salesforce Object in the target Org (e.g., Lead Object in Org 1). </p>
  <div class="w3-card w3-container w3-center w3-mobile" > <img class="w3-image" src=/img/data-action-7.jpg> </div>
 <p> &nbsp; </p>
</div>    
 </details> 

  

   <p> Hope you enjoyed the hands-on. Thank you!</p>     
 </div>
<!-- Part 5 End -->
 <div class="w3-container"> <div class="w3-bar w3-black">
       <a href="http://datacloud-workshop.github.io/index.html" class="w3-bar-item w3-button"><i class="fa fa-user fa-fw w3-margin-right"></i>Get Started </a>     
    <a href="http://datacloud-workshop.github.io/insidedatacloud.html" class="w3-bar-item w3-button"><i class="fa fa-user fa-fw w3-margin-right"></i>Inside Data Cloud </a>     
    <a href="http://datacloud-workshop.github.io/hands-on.html" class="w3-bar-item w3-button"><i class="fa fa-user fa-fw w3-margin-right"></i>Hands-on Lab</a> 
    <a href="http://datacloud-workshop.github.io/ideation.html" class="w3-bar-item w3-button"><i class="fa fa-envelope fa-fw w3-margin-right"></i>Ideation </a>
    <a href="http://datacloud-workshop.github.io/resources.html" class="w3-bar-item w3-button"><i class="fa fa-envelope fa-fw w3-margin-right"></i>Resources </a>
</div> </div>

<!-- End page content -->
<hr>
<p style="margin-top:50px;"> &nbsp;</p>
</div>

<script>
// Script to open and close sidebar
function w3_open() {
    document.getElementById("mySidebar").style.display = "block";
    document.getElementById("myOverlay").style.display = "block";
}
 
function w3_close() {
    document.getElementById("mySidebar").style.display = "none";
    document.getElementById("myOverlay").style.display = "none";
}
</script>

</body>
</html>
